<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Games Dashboard</title>
    <style>
        body { font-family: sans-serif; margin: 2em; }
        h1, h2 { color: #333; }
        table { border-collapse: collapse; width: 600px; }
        th, td { border: 1px solid #ccc; padding: 8px; }
        th { background-color: #f4f4f4; }
        a { float: right; }
    </style>
</head>
<body>
<a href="/logout">Вийти</a>
<h1>Вітаємо, {username}!</h1>

<h2>Ваша бібліотека ігор</h2>

{#if games.size > 0}
    <table>
        <thead>
        <tr>
            <th>Назва гри</th>
            <th>Жанр</th>
            <th>Ваш відгук</th>
            <th>Дії</th>
        </tr>
        </thead>
        <tbody>
        {#for game in games}
            <tr>
                <td>{game.title}</td>
                <td>{game.genre}</td>
                <td>
                    {#if game.review}
                        <div style="color: green;">
                            <strong>★ {game.review.rating}/5</strong><br/>
                            {game.review.text}
                        </div>
                    {#else}
                        <form action="/review" method="POST" style="display: flex; gap: 5px;">
                            <input type="hidden" name="gameId" value="{game.id}" />

                            <select name="rating">
                                <option value="5">5</option>
                                <option value="4">4</option>
                                <option value="3">3</option>
                                <option value="2">2</option>
                                <option value="1">1</option>
                            </select>

                            <input type="text" name="text" placeholder="Напишіть..." required />

                            <button type="submit">Send</button>
                        </form>
                    {/if}
                </td>
                <td style="text-align: center;">
                    <form action="/remove" method="POST" onsubmit="return confirm('Ви впевнені, що хочете видалити цю гру?');">
                        <input type="hidden" name="gameId" value="{game.id}" />
                        <button type="submit" style="background-color: #ff4444; color: white; border: none; padding: 5px 10px; cursor: pointer;">
                            Видалити
                        </button>
                    </form>
                </td>
            </tr>
        {/for}
        </tbody>
    </table>
{#else}
    <p>У вашій бібліотеці ще немає ігор.</p>
{/if}

<hr/>

<h2>Магазин Ігор (Доступні для купівлі)</h2>

<table>
    <thead>
    <tr>
        <th>ID</th>
        <th>Назва</th>
        <th>Жанр</th>
        <th>Дія</th>
    </tr>
    </thead>
    <tbody>
    {#for game in store}
        <tr>
            <td>{game.id}</td>
            <td>{game.title}</td>
            <td>{game.genre}</td>
            <td>
                <form action="/buy" method="POST">
                    <input type="hidden" name="gameId" value="{game.id}" />
                    <button type="submit">Купити</button>
                </form>
            </td>
        </tr>
    {/for}
    </tbody>
</table>

</body>
</html>